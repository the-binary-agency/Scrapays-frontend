<div class="row mt-5 pt-md-5">
  <div class="row mb-4 pl-4" *ngIf="collectorToAssign.firstName">
    Choose request to assign to
    <span class="bolder ml-2">
      {{ collectorToAssign.firstName + " "
      }}{{ collectorToAssign.lastName + " " }} ({{
        "Collector " + collectorToAssign.id
      }})
    </span>
  </div>
  <div class="w-100">
    <table mat-table [dataSource]="dataSource" matSort>
      <!-- ID Column -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          ID
        </th>
        <td
          mat-cell
          *matCellDef="let row"
          (click)="assignToCollector(row)"
          class="fake-btn"
        >
          {{ row.id }}
        </td>
      </ng-container>

      <!-- Progress Column -->
      <ng-container matColumnDef="userID">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>User ID</th>
        <td
          mat-cell
          *matCellDef="let row"
          (click)="assignToCollector(row)"
          class="fake-btn"
        >
          {{ "0" + row.userID.split("+234")[1] }}
        </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="assignedCollector">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          Assigned Collector
        </th>
        <td
          mat-cell
          *matCellDef="let row"
          (click)="assignToCollector(row)"
          class="fake-btn"
        >
          {{
            row.assignedCollector
              ? "0" + row.assignedCollector.split("+234")[1]
              : "None"
          }}
        </td>
      </ng-container>

      <!-- Color Column -->
      <ng-container matColumnDef="address">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          Address
        </th>
        <td
          mat-cell
          *matCellDef="let row"
          (click)="assignToCollector(row)"
          class="fake-btn"
        >
          {{ row.address }}
        </td>
      </ng-container>

      <!-- Color Column -->
      <ng-container matColumnDef="materials">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          Materials
        </th>
        <td
          mat-cell
          *matCellDef="let row"
          (click)="assignToCollector(row)"
          class="fake-btn"
        >
          {{ formatMaterials(row.materials) }}
        </td>
      </ng-container>

      <!-- Color Column -->
      <ng-container matColumnDef="schedule">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          Schedule
        </th>
        <td
          mat-cell
          *matCellDef="let row"
          (click)="assignToCollector(row)"
          class="fake-btn"
        >
          {{ formatSchedule(row.schedule) }}
        </td>
      </ng-container>

      <!-- Color Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          Status
        </th>
        <td
          mat-cell
          *matCellDef="let row"
          (click)="assignToCollector(row)"
          class="fake-btn"
        >
          {{ row.status }}
        </td>
      </ng-container>

      <!-- Color Column -->
      <ng-container matColumnDef="time">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          Time Requested
        </th>
        <td
          mat-cell
          *matCellDef="let row"
          (click)="assignToCollector(row)"
          class="fake-btn"
        >
          {{ row.created_at | date: "short" }}
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

      <!-- Row shown when there is no matching data. -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="6">
          <!-- No data matching the filter "{{ input.value }}" -->
        </td>
      </tr>
    </table>

    <mat-paginator pageSize="25"></mat-paginator>

    <ngx-loading [show]="loading"></ngx-loading>
  </div>
</div>
